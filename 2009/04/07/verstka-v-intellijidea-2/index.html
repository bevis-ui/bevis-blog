<!DOCTYPE html><html><head><meta charset="utf-8"/><title>Вёрстка в IntelliJIDEA. Часть №2</title><link rel="stylesheet" href="../../../../build/build.min.css"/><link rel="stylesheet" href="http://yandex.st/highlightjs/8.0/styles/github.min.css"/></head><body class="page _init" data-block="page"><div class="header" data-block="header"><h1 class="header__title"><a class="header__title-link" href="../../../..">Markdown блог</a></h1><h2 class="header__slogan">Как Octopress, только на BEViS :)</h2></div><ul class="menu" data-block="menu"><li class="menu__item"><a class="menu__link" href="../../../../">Главная</a></li><li class="menu__item"><a class="menu__link" href="../../../../presentation">Презентации</a></li><li class="menu__item"><a class="menu__link" href="../../../../archive">Архив</a></li></ul><div class="post_main" data-block="post"><h1 class="post_main__title">Вёрстка в IntelliJIDEA. Часть №2</h1><div class="post_main__tags"><span class="post_main__tags-label">Темы: </span><a class="post_main__tag" href="../../../../tag/HTML/">HTML</a><a class="post_main__tag" href="../../../../tag/IntelliJIDEA/">IntelliJIDEA</a><a class="post_main__tag" href="../../../../tag/XML/">XML</a><a class="post_main__tag" href="../../../../tag/%D0%A1SS/">СSS</a></div><div class="post_main__date">Tuesday, April 07, 2009</div><div class="post_main__body"><p>Это вторая часть моего доклада, который состоялся 31 января 2009 года в рамках Яндекс.Субботника.</p>
<p>В <a href="http://makishvili.com/2009/02/06/verstka-v-intellijidea-1/">первой части статьи</a> мы поговорили о том, что IntelliJIDEA — это среда разработки для Java, которую можно несложным образом приспособить для клиентской верстки. Мы разобрали, как единожды создать IDEA Project и как сделать так, чтобы разработка каждого последующего Нашего Проекта не требовала делать это заново. Еще мы поговорили о том, что интерфейс IDEA интуитивно понятен и привычен. И при этом смотрели на такой слайд.</p>
<p><a href="/images/post/2009-02-06-verstka-v-intellijidea-1/project10.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/project10-opt.png" alt="Установка"></a></p>
<p><strong>Но есть момент, на который я сознательно не заострял внимание на презентации.</strong></p>
<p>А именно, после создания IDEA Project в  Project Panel мы видим сразу вот такую картину:</p>
<p><a href="/images/post/2009-02-06-verstka-v-intellijidea-1/project16.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/project16-opt.png" alt="Установка"></a></p>
<p>То есть мы видим не только те самые физические сущности IDEA Project-а, но еще и Libraries, которые нужны для Java-проекта. А нам их видеть крайне нежелательно.
<strong>Чтобы не видеть этих файлов, нужно сменить View</strong>:</p>
<ul>
<li>По умолчанию он установлен в вид IDEA Project</li>
</ul>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/project17.png" alt="View as Project"></p>
<ul>
<li>Выбрать нужно вид Scope: Production</li>
</ul>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/project18.png" alt="View as Production"></p>
<p>А сейчас я предлагаю Вашему вниманию вторую часть презентации &quot;Вёрстка в IntelliJIDEA&quot;.</p>
<!-- more -->


<h1 id="-">Часть вторая</h1>
<p>Девиз:
<strong>Забудьте про рутину</strong></p>
<p>За всеми фичами Идеи, о которых я расскажу, я хочу чтобы не потерялась одна мета-фича. В чем она?</p>
<p><strong>IntelliJIDEA умеет отвечать на вопросы разработчика.</strong>
Она отвечает на все явные вопросы, которые я ей задал явно. Ну, то есть, я попросил её что-то сделать — она сделала.
И ещё она отвечает на множество неявных вопросов, которые я ей сам не задавал, но ответы на которые меня интересуют постоянно.</p>
<p>Без примеров не сильно понятно, поэтому я раскрою свою мысль понятной аналогией.</p>
<p>Что такое Яндекс?
Яндекс — это такая компания, основная задача которой — <a href="http://company.yandex.ru/about/">давать ответы на вопросы пользователей</a>.</p>
<p>На какие вопросы отвечает Яндекс?</p>
<ol>
<li>На вопросы явные.<br>Это вопросы, которые пользователи задают в поисковой строке, а Яндекс отвечает на них на страницах результатов поиска.</li>
</ol>
<ol>
<li>На вопросы неявные.<br>Например, «какая сегодня погода», «происходит ли сейчас что-то важное», «можно ли проехать по городу». Яндекс отвечает на них своими справочными блоками на главной странице портала.</li>
</ol>
<p>Ну вот, поведение IntelliJIDEA очень похоже на миссию Яндекса ;)
Только у Яндекса ответ на вопрос пользователя — это информация, а у IntelliJIDEA ответом на вопрос разработчика является конкретная помощь.</p>
<p>А чем физически выражается вёрстка?
А она выражается некими действиями, которые разработчик совершает своими пальцами, работая над неким кодом.</p>
<p>А чем физически выражается код?
Такими многослойными абстракциями, как файлы кода, литеральное представление кода и структурные элементы кода.</p>
<p>То есть, если попытаться классифицировать действия, совершаемые над кодом, то я могу выделить три группы действий:</p>
<ol>
<li>Работа с такой абстракцией, как файлы Проекта.
Например, копирование, переименование, поиск и другие действия с файловой системой</li>
</ol>
<ol>
<li>Работа с такой абстракцией, как литеральная запись кода.
Я имею в виду работу со строками файла + функции систем контроля версий</li>
</ol>
<ol>
<li>Работа с такой сущностью, как структурные элементы кода.
Я имею в виду нюансы работы с конкретным кодом (HTML/CSS и др.)</li>
</ol>
<p>Хорошая IDE для каждой из этих групп предоставляет некие фичи, которые облегчают выполнение этих действий.</p>
<h1 id="-">Живое Целое</h1>
<p>Но IntelliJIDEA  двинулась дальше — она не проводит разделения кода на группы, она работает с Проектом, как с Живым Целым. Звучит это странно, но Java-разработчики меня прекрасно понимают. Я поясню, что имел в виду.</p>
<p>В то время, как большинство редакторов работают с Проектом, как с отдельными сущностями файлов <strong>на файловой системе</strong>, IntelliJIDEA с файловой системой не работает. Идея работает <strong>со своими кешами</strong>, в которых хранится копия-слепок файлов Проекта.
Oops?</p>
<p>Выглядит это так: когда вы поднимаете утром IntelliJIDEA, она загружает в память IDEA Project, который мы создали в первой части статьи. &quot;Загружает&quot; означает буквально следующее:</p>
<ol>
<li>Идея смотрит в  IDEA Project File, находит в нём информацию о том, какие IDEA Modules в нем описаны.</li>
</ol>
<ol>
<li>После этого смотрит в IDEA Module File и ищет путь к Content Root.</li>
</ol>
<ol>
<li>Затем переходит на файловой системе в этот Content Root и всасывает файлы Нашего Проекта в свои кеши. Всасывает и при этом индексирует.</li>
</ol>
<p>&quot;Индексирует&quot; означает выявляет взаимосвязи файлов Проекта на основании анализа структурных элементов кода. Именно благодаря этому в IntelliJIDEA есть, к примеру, такой мощный инструмент, как Инспекторы Кода.</p>
<p>Я приведу несложный пример.
Например, индексация дошла до файла index.html.</p>
<ol>
<li>Идея этот файл всасывает в свои кеши</li>
</ol>
<ol>
<li><p>После чего его парсит и, например, встречает в нём подключение стилевого файла</p>
<link type="text/css" href="../css/idea.css"/>


</li>
</ol>
<ol>
<li>Внутри своих кешей Идея регистрирует взаимосвязь между файлами index.html и idea.css</li>
</ol>
<ol>
<li>После этого смотрит в файл idea.css и запоминает CSS-селекторы, которые в нём описаны.</li>
</ol>
<ol>
<li>Потом сравнивает селекторы из файла idea.css с именами классов у HTML-элементов в файле index.html</li>
</ol>
<ol>
<li>И если в idea.css есть неиспользуемые в index.html CSS-селекторы, то Идея об этом сообщит в заметной но ненавязчивой форме.</li>
</ol>
<p>Я только что привел пример ответа Идеи на мой неявный вопрос: &quot;Мои стили актуальны? Есть ли среди них рудиментарные селекторы, которые уже не используются, но болтаются под ногами во время разработки и выливаются в продакшн?&quot;</p>
<p>Эта фича и многие другие были бы невозможны, если бы Идея не &quot;всасывала&quot; все взаимосвязи файлов Нашего Проекта в свои кеши, а работала с файлами, как с отдельными сущностями (как это делают многие другие редакторы)</p>
<p>Спешу успокоить тех из вас, кто уже озадачился: &quot;Если Идея работает только со своими кешами, а не с файлами на файловой системе, то как тестировать в браузерах? Изменения в браузере отображаются не сразу?&quot;</p>
<p>Сразу :) Как только  IntelliJIDEA теряет фокус (вы переключились на другое приложение), происходит моментальная синхронизация кешей Идеи с файловой системой. &quot;Моментальная&quot; означает мгновенная, молниеносная... Придумайте еще более точный синоним :)
Это происходит настолько быстро, что можно работать с Идеей годами и никогда не узнать про её кеши.</p>
<p>К слову, редактируя код, нет необходимости руками сохранять ваши изменения. <strong>Ctrl S</strong> можно забыть — ваши изменения сохраняются автоматически. И к тому же,  никогда ничего не потеряется, потому что внутри IntelliJIDEA ведется Local History ваших изменений (но об этом чуть позже).</p>
<p>Сразу хочу ответить на еще один скептический вопрос: &quot;Наверное, из-за  постоянной синхронизации кешей и ведения Local History всё безбожно тормозит?&quot; Нет, всё летает. Наши ребята из Питера — молодцы, умеют! :)</p>
<p>К слову, именно благодаря Живому Целому в xsl удобно навигироваться по шаблонам, которые связаны друг с другом через импорты. То есть, если вы используете <xsl:apply-imports/>, то можете легко провалиться в базовый шаблон из переопределенного по <strong>Cmd Click</strong> или <strong>Cmd B</strong>.</p>
<p>На этом общие характеристики я заканчиваю и перехожу к описанию конкретных бенефитов Идеи. Разбиение по главам формальное, в тексте к одной и той же фиче я могу подходить с описанием несколько раз в разных главах.</p>
<h1 id="gui-and-settings">GUI and Settings</h1>
<p>Интерфейс действительно привычен и удобен: основная панель для редактирования файлов, вспомогательные панели (типа Project, Structure, Changes), главное меню программы, тулбар с иконками для частых действий и контекстное меню по правому клику. Освоить его и, главное, модифицировать под свои потребности можно без особых усилий. Кастомизировать в GUI можно не всё, но многое. Мне хотелось бы ещё &quot;таскабельности&quot; табов, которой нет, но и без неё вполне можно.</p>
<p>В процессе описания я буду вас отправлять в Диалог Настроек IntelliJIDEA. Он находится в двух кликах мыши от нас File -&gt; Settings. Или если пользоваться хоткеем, то еще ближе:  <strong>Cmd,</strong>
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/settings.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/settings-opt.png" alt="Настройки"></a>
<strong>Cmd,</strong> — это хоткей в Макоси. В винде, я честно признаюсь, хоткей не помню :)</p>
<h1 id="file-templates">File Templates</h1>
<p>Как картина начинается с чистого холста, вёрстка начинается с нового файла.
Создание файла в Идее ничем не примечательно.</p>
<p><strong>Right Click -&gt; New -&gt; Выбрать шаблон</strong>
<img src="/images/post/2009-02-06-verstka-v-intellijidea-1/create-file-01.png" alt="Создать новый файл"></p>
<p>Примечательно, что предустановленные файловые шаблоны (которые идут в коробке) можно полностью модифицировать под свои нужды. А еще можно создавать свои шаблоны. Делается это в  <strong>Settings -&gt; File Templates</strong>.
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/create-file-02.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/create-file-02-opt.png" alt="Создать новый файл"></a></p>
<p>В примере на скриншоте видны два дефолтных шаблона Html и Xhtml, внутри которых я описал некую заготовку для создания яндекс-файлов. В них я указал тот DOCTYPE, который используем мы, <a href="http://pepelsbey.net/2008/09/ie-street-magic/">Meta  X-UA-Compatible</a>, который используем мы, <a href="http://makishvili.com/2009/03/conditional-comments/">подключение стилей по правилам</a>, которые используем мы и т.д. Ничто вас не остановит, если вы захотите создать свои файловые шаблоны для  XSLT, например.</p>
<p>Но в целом, File Templates (далее по тексту FT) не заслуживают пристального внимания — ничего сногсшибательного :) Того же результата можно достичь, если задействовать Live Templates.</p>
<h1 id="live-templates">Live Templates</h1>
<p>Что такое Live Templates (далее по тексту LT)? Это некие текстовые шоткаты, которые по нажатию какой-то клавиши превращаются в соответствующий фрагмент кода. О них я еще расскажу ниже в аспекте создания элементов кода. LT тоже есть предустановленные, и есть возможность создавать свои. Использовать LT для создания каркаса новых файлов удобнее, чем FT. Удобнее тем, что они предоставляют возможность после разворачивания кода пройти по элементам кода в том порядке, который я выбрал и заполнить эти места.</p>
<p>Создать заготовку для создания яндекс-файлов можно набрав в файле текст &quot;html&quot; и нажать Tab. После этого создастся та же структура, что и при использовании File Template (неудивительно, это же я сам создал такой Live Template).</p>
<p><a href="/images/post/2009-02-06-verstka-v-intellijidea-1/create-file-03.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/create-file-03-opt.png" alt="Создать новый файл"></a></p>
<p>На скриншоте я показал стрелочками порядок обхода файлов. В каждой из точек Идея остановится и подождет, пока я не введу туда то, что посчитаю нужным.</p>
<p>В последней точке пути мы оказались в body документа. Задействуем еще раз Live Templates. Я создал свой LT для создания таблицы <strong>table -&gt; Tab</strong>:</p>
<pre><code>&lt;table&gt;
&lt;tr&gt;
    &lt;td&gt;
    &lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;
</code></pre><h1 id="surround-folding-and-code-style">Surround, Folding and Code Style</h1>
<p>После этого мы поняли, что нам для вёрстки необходим элемент <code>tbody</code> и обернули строку этим элементом. Для этого выделили строку и на Selection-е нажали <strong>Cmd Alt J</strong>. То есть обернуть можно любой элемент любым элементов. На скриншоте видны дефолтные &quot;обертывания&quot;. Обертывание кавычками-ёлочками я создал сам, потому что надоело писать эти entities руками.</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/surround.png" alt="Surround"></p>
<p>Обращаю ваше внимание на то, что обертывания особенно удобны в ситуации, когда у нас уже есть какой-то развесистый блок с непростой внутренней структурой детей. То есть, когда закрывающий тег блока находится в паре-тройке экранов от открывающего.</p>
<p>Я поясню моё утверждение на примере.
Представим, что нам нужно обернуть длинную таблицу с данными дополнительным <code>div</code>-ом. В классическом редакторе, типа notepad.exe, мы должны найти открывающий тег <code>&lt;table&gt;</code> и перед ним написать открывающий <code>&lt;div&gt;</code>. Потом пролистать экран вниз, глазами найти закрывающий тег <code>&lt;/table&gt;</code> и написать после него  закрывающий <code>&lt;/div&gt;</code> А если код не ваш, а вашего предшественника? А если предшественник не структурировал код табуляцией? А если в его таблице ещё несколько вложенных таблиц, и всё вместе это кирпич нечитаемого кода? Представили свои усилия по исполнению обертывания, если вы пользуетесь notepad.exe?</p>
<p><strong>А как это решается в IDEA?</strong>
Неважно, как неряшливо ваш предшественник структурировал свой код; неважно, сколько вложенных таблиц в нём, и не важно сколько экранов код занимает. Всё это на себя берёт IDEA. А что делаем мы?</p>
<ol>
<li>Становимся курсором в открывающий тег <code>&lt;table&gt;</code>,</li>
<li>Фолдим (схлопываем) таблицу по хоткею <strong>Cmd-</strong> и выделяем ее мышью</li>
<li>Нажимаем знакомый нам хоткей <strong>Cmd Alt J</strong> и оборачиваем таблицу.</li>
</ol>
<p>&quot;Обернуть назад&quot; тоже удобно: когда понадобится удалить div-обертку вокруг таблицы в несколько экранов, станьте на этот див и нажмите <strong>Shift Cmd Fn Backspace</strong>. И пусть макосёвые хоткеи вас не пугают — в винде они попроще.</p>
<p>Фолдинг — мощное средство, которое очень удобно использовать при рефакторинге развесистых структурных элементов. Призываю Вас использовать его так часто, как только сможете придумать.</p>
<p>Кстати, после обертывания в примере выше, вы бонусом получаете ещё и хорошо отструктурированный код. IDEA против неряшливости :)</p>
<p>Структурирование кода, конечно же, может быть вызвано не только в виде бонуса после обертывания, но и по нашему прямому указанию хоткеем <strong>Cmd Alt L</strong>. Структурирование происходит по неким правилам, которые мы можем подпилить под наши нужды — переводы строк, отбивку табами или пробелами и прочие. Эта возможность называется Code Style. Отныне работа с неряшливым кодом ваших предшественников более не проблема :)</p>
<p><a href="/images/post/2009-02-06-verstka-v-intellijidea-1/code-style.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/code-style-opt.png" alt="Code Style"></a></p>
<h1 id="dtd">DTD</h1>
<p>Но вернемся к нашей простой задаче: мы обернули строку таблицы элементом <code>tbody</code>. А спустя какое-то время к нам пришел js-программист и сказал, что ему в JS  было бы очень удобно некоторые группы строк оборачивать в отдельные <code>tbody</code>, чтобы легко получать доступ к ним.</p>
<p>Вот с таким вопросом ко мне пришел <a href="http://evgeniy-zaharevich.moikrug.ru/">Женя Захаревич</a>: &quot;Можем ли мы это реализовать?&quot; А я не знал, может ли таблица иметь несколько <code>tbody</code> по спецификации. Но знал у кого спросить — у IntelliJIDEA :)</p>
<p><strong>Cmd Click</strong> на имени элемента провалил меня в DTD, в котором я очень быстро узнал, что <code>tbody</code> может быть сколько угодно. Осознайте этот момент: мне не пришлось идти в интернет, открывать соответствующую спецификацию HTML или XHTML, искать в ней раздел про таблицы, а потом еще читать по-английски. Я узнал это не уходя из Идеи за считанные секунды. Правда, для этого нужно <a href="http://web-zine.org/art/how_to_dtd">уметь читать DTD</a>. Но если вы пишете регекспы (и знаете что такое * + ?), то ... Несложно, в-общем.</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/DTD-tbody.png" alt=""></p>
<h1 id="custom-dtd">Custom DTD</h1>
<p>А можем ли мы использовать кастомные DTD?
По сути, тут звучит сразу два вопроса:</p>
<ol>
<li>Есть ли поддержка кастомных DTD в IntelliJIDEA?</li>
<li>Таки зачем оно нам надо? :)</li>
</ol>
<p>Сразу разберемся со втором вопросом, как я его понимаю.
Иногда хочется иметь возможность в своем HTML иметь кастомные атрибуты, к примеру, для удобной валидации форм яваскриптом. И при этом хочется, чтобы валидирующий инструмент, которым мы пользуемся для проверки своего кода, не ругался на них.</p>
<p>Как решение — написать свой DTD, выложить его в инет и в доктайпе своего HTML указать путь к этому DTD. Единственная проблема — браузеры не валидируют. Это означает, что браузер никогда не пойдет по указаному нами адресу к нашему кастомному DTD — он посмотрит в свою &quot;внутреннюю&quot; таблицу соответствий версии HTML и DTD. Поэтому наша страница с кастомными атрибутами будет невалидна в любом браузере.
То есть в production оно таки нам не надо :)</p>
<p>А для разработки очень даже бывает надо. Когда?
Раскрою свежий &quot;Яндекс.Секрет&quot; :)
Сейчас развивается новая внутренняя технология, которая призвана облегчить взаимодействие HTML-верстальщика и XSL-верстальщика. Она называется ULL, ее автор <a href="http://vomixamxam.ya.ru">Макс Максимов</a>.
Идею этой технологии я раскрывать не буду, но сказать пару слов о ней в разрезе кастомного доктайпа можно — эта технология добавляет в наш HTML-документ новые элементы разметки: кастомные атрибуты в своем неймспейсе ull.</p>
<p>Отслеживать правильность использования этих атрибутов мне самому не хочется. Я хочу, чтобы это делала за меня IntelliJIDEA. Для этих целей Максим создал кастомный DTD на основе XHTML 1.0 Transitional, в который добавил правила для ull-атрибутов.
После того, как я подключил в документ этот DTD (на скрине видно, что в public identifier путь указан от локальной папки), Идея стала валидировать мои документы с учетом этого DTD и подсказывать мне правильность написания этих атрибутов.</p>
<p><a href="/images/post/2009-02-06-verstka-v-intellijidea-1/DTD-custom.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/DTD-custom-opt.png" alt="DTD Custom"></a></p>
<h1 id="autocomplete">Autocomplete</h1>
<p>То есть, помнить написания этих ull-атрибутов  мне уже не нужно — за меня это делает автокомплит.
Автокомплит — ни разу не новшество, он появился в редакторах еще при царе Горохе. Но особенная вкусность автокомплита IntelliJIDEA в том, что он контекстный. Контекстный на основе DTD.</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/autocomplete.png" alt="Autocomplete"></p>
<p>На скрине за скролом всех подсказок не видно, но я поясню — в подсказке нет ни одного блочного элемента. Потому что, как мы хорошо знаем из DTD, внутри параграфа могут находиться только строчные элементы. Или вот еще более конкретный пример:</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/autocomplete-02.png" alt="Autocomplete"></p>
<p>Спецификация XHTML говорит, что в том месте, где на скрине стоит курсор, могут находиться только те 7 элементов, которые нам подсказывает IntelliJIDEA. По-моему, это ещё один удачный пример ответа на мой неявный вопрос.</p>
<p>Контекстный автокомплит исключительно вкусен в XSL.
XSL-переменные подсказываются исходя из области видимости переменной: та переменная, которая создана в конкретном шаблоне, будет подсказана только в этом шаблоне, в остальных шаблонах и в глобальной зоне видимости она предлагаться не будет.
И по аналогии с HTML, внутри <code>&lt;xsl:call-template&gt;</code> автокомплит никогда не предложит выбрать элемент <code>&lt;xsl:param&gt;</code>, потому что по схеме XSL внутри <code>&lt;xsl:call-template&gt;</code> элемента <code>&lt;xsl:param&gt;</code> быть не может.</p>
<p>А в XML-файлах IntelliJIDEA анализирует структуру редактируемого файла, и автокомплит-меню предлагает использовать уже существующие теги и их атрибуты. То есть IDEA как бы &quot;самообучается&quot;</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/autocomplete-10.png" alt=""></p>
<p>И завершая тему autocomplete, два слова про подстановку путей к ресурсам: в HTML-атрибутах <code>href=&quot;&quot;</code>, <code>src=&quot;&quot;</code> и в CSS-значениях <code>url()</code> Идея подсказывает пути к ресурсам с помощью autocomplete-меню.</p>
<p>Для вызова автокомплита используется хоткей <strong>Ctrl Space</strong>. Для Mac OS X тоже используется он, так как <strong>Cmd Space</strong> занят под смену раскладки клавиатуры.</p>
<h1 id="file-encodings">File Encodings</h1>
<p>Кодировка. Больная мозоль для многих и многих роботов — одни не умеют работать с UTF, другие не могут определять кодировку автоматически, третьи при сохранении файла перекодируют в другую...
В IntelliJIDEA с кодировкой всё хорошо — она даёт разработчику свободу выбора по принципу &quot;пиши в той кодировке, которая тебе нужна&quot;. Что тут рассказать? Перечислять баги других редакторов и говорить, что в Идее этих багов нет? В этом перечислении нет смысла.
Короче, работая в Идее, можно никогда в жизни не задуматься о том, что файлы могут существовать в разных кодировках :)</p>
<p>А! Есть всё-таки две фичи, о которых рассказать надо.
Первая — для разных папок Вашего IDEA-Module можно указать разные кодировки.
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/file-encoding.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/file-encoding-opt.png" alt="File Encoding"></a></p>
<p>На скрине видно, что я принудительно указал Идее работать с разными директориями в разных кодировках. То есть, к примеру, при создании нового файла в папке deployment, файл будет создан в кодировке cp-1251, а в папке intelijidea в кодировке utf-8. Нам это особенно актуально, потому что Проектов в Яндексе много. То есть, команд разработки тоже много, и у каждой команды могут быть свои предпочтения в выборе кодировки. Работая в команде, которая не хочет (или по каким-то причинам не может) перейти на utf-8, я один раз выставляю нужную кодировку и больше об этих проблемах не думаю.</p>
<p>А вторая фича — возможность конвертирования файлов из кодировки в кодировку прямо в интерфейсе IntelliJIDEA. Конвертировать можно как файл, директорию, так и группу из того и другого.</p>
<p><a href="/images/post/2009-02-06-verstka-v-intellijidea-1/file-encoding-2.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/file-encoding-2-opt.png" alt="File Encoding"></a></p>
<h1 id="browser-preview">Browser Preview</h1>
<p>Ну и вот, предположим, что у нас есть уже созданная страница в нужной нам кодировке и с каким-то фрагментом кода. И уже хочется просмотреть в браузере, как она выглядит. Какие есть быстрые способы это сделать?</p>
<ol>
<li>Панель прыжка в браузер. Попробуйте подвести мышь к верхне-правому углу Editor View в любом HTML-документе. Вы увидите всплывающую панель с иконками установленных у вас браузеров. Клик по иконке перебросит вас в браузер, в котором откроется ваш HTML-файл.
<img src="/images/post/2009-02-06-verstka-v-intellijidea-1/browser-icons.png" alt="Browser Panel"></li>
</ol>
<ol>
<li>С помощью хоткея <strong>Cmd Shift C</strong> в Идее можно скопировать полный путь файла на файловой системе в буфер обмена. То есть, открыть на редактирование файл и вызвать хоткей. Дальше переключиться руками в браузер и <strong>Cmd V </strong>в адресной строке</li>
</ol>
<ol>
<li>С помощью Mozilla Preview Panel. В Идее есть встроенный Mozilla браузер — им можно просматривать верстку, не переключаясь в стендалон браузер. Но смысла в этом большого нет. Я вижу прямое назначение этой панели лишь в Javascript-дебагинге. Но об этом ниже.
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/browser-preview.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/browser-preview-opt.png" alt="Browser Panel"></a></li>
</ol>
<h1 id="system-version-control">System Version Control</h1>
<p>Как я <a href="http://makishvili.com/2009/02/verstka-v-intellijidea-1/#svc">уже говорил</a> в первой статье, в IDEA есть поддержка большого количества Систем Контроля Версий. Вы сами выбираете, какие их них использовать.</p>
<p>&quot;Живое Целое&quot; дает бонус IntelliJIDEA и для работы с Системами Контроля Версий. Что такое CVS/SVN и с чем их едят, уверен, не мне вам рассказывать. Вы пользуетесь ими ежедневно и командной работы без них не мыслите.</p>
<p>В чем же вкусность? Особенность?
В том, IntelliJIDEA отслеживает любое изменение в файле и сообщает об этом в своем неповторимом ненавязчивом виде. Я остановлюсь на этом очень подробно.</p>
<p>После того, как я проассоциировал файлы IDEA-модуля Presentation с конкретным SVN-репозиторием, любое изменение файла отображается на левой панели Editor View цветными блоками (синими, зелеными) и серыми стрелочками.
<img src="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-1.png" alt="VSC"></p>
<p>Синий блок означает, что код справа от него изменён.
Зеленый блок означает, что код добавлен.
Серая стрелка говорит нам, что какой-то код удалён.</p>
<p>Эти блоки и стрелки кликабельны. Клик на них рождает малюсенькую панель с кнопками действий, которые можно совершить над изменённым кодом.</p>
<p>По клику на зеленый блок мы видим возможность Rollback — откатить назад локальные добавки.</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-2.png" alt="VSC"></p>
<p>Попросту говоря, удалить этот кусок. Понятно, что можно удалить и руками если он так же мал, как на скрине. Но если фрагмент кода велик, то быстрее удалить rollback-ом. Но это не только быстрее, а что важнее — надежнее — я точно уверен, что удалится только то, что не относится к последней ревизии этого файла.
Еще мы видим синюю стрелку вверх, кликаем на нее и переходим на предыдущее незакоммиченное изменение.</p>
<p>Теперь слева не цветной блочок, а серая стрелка, что означает — в этой строке удален фрагмент кода. А в панели действий мы видим этот самый удаленный код.</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-3.png" alt="VSC"></p>
<p>Ну, синие стрелки, понятно, служат быстрой навигации по изменениям, rollback — тоже уже понятно. Следующая кнопка родит нам diff-окно, но о нем я чуть позже.
А последняя кнопка панели копирует этот фрагмент кода в буфер. Бывает нужно.</p>
<p>По клику на синий блок мы видим ту же панель и фрагмент кода, который предшествовал текущему</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-4.png" alt="VSC"></p>
<p>Обратите внимание, что на правой панели тоже есть какие-то блоки светло-серого цвета.</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-5.png" alt="VSC"></p>
<p>Кроме светло-серых там могут появляться блоки других цветов, о которых мы еще вспомним. Но именно светло-серые блоки на правой панели имеют отношение к SVC — они сообщают лишь о том, что в такой-то строке кода произошло изменение и я его не закоммитил. И на первый взгляд это кажется сомнительной фичей. Но когда код страницы занимает несколько экранов, то быстро перемещаться к незакомиченным изменениям в коде очень удобно, потому что все изменения у меня на виду. Перемещение к измененной строке происходит простым кликом на светло-серый блок.</p>
<p>Вот, например, на такой странице по своим изменения навигироваться простым кликом быстро и удобно.
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-6.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-6-opt.png" alt="VSC"></a></p>
<h1 id="local-history">Local History</h1>
<p>Почему-то, как у кого ни спрошу, почти никто не пользуется в IDEA такой фичей, как Local History. При этом называют такие причины:</p>
<ol>
<li>Идея жутко тормозит, если не выключить LocalHistory</li>
</ol>
<ol>
<li>Зачем оно нужно, если есть SVC?</li>
</ol>
<p>Давайте развенчаем миф про тормоза. Да, было. Если мне не изменяет память, когда-то давно разработчики IntelliJIDEA рекомендовали как временный воркэраунд отключать Local History. Но те проблемы давно решены и сегодня (версия 8.1) мне не известны проблемы производительности. Поэтому, не отключайте Local History, не лишайте себя такой клевой фичи.</p>
<p>Помните, мы говорили про кеши, как про некие слепки файлов?  Эти слепки хранятся несколько дней назад. По умолчанию, три дня.
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/lh-1.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/lh-1-opt.png" alt="Local History"></a></p>
<p>Если вы пользуетесь SVN, то соглашусь, держать историю больше, вроде как и нет смысла. Но если в вашей компании не хотят поднять svn/cvs сервер или использовать децентрализованное хранилище (о, git, как ты моден сейчас), то вас выручит долгосрочная Local History. Выставьте больше дней и живите спокойно — любые ваши изменения будут сохранены.</p>
<p>И если вам понадобится вернуться к своему какому-то решению, вы можете просмотреть и вернуть его через диалог
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/lh-2.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/lh-2-opt.png" alt="Local History"></a></p>
<p>Но обращаю ваше внимание, что в диалоге настроек указаны чекбоксы действий, которые автоматически ставят метки. Метки — это чекпойнты сохранения, если кому так понятнее :) А можно эти метки создавать самому. На скрине видно много автоматических меток, которые создались при открытии IDEA-Project-а, и одна метка, которую я создал руками. Нам, верстальщикам, стоит помнить, что автоматическая метка ставится только при открытии проекта. Остальное из списка чекбоксов работает только в Java-проектах.</p>
<p>Я нередко использую именно ручное создание меток в локальной истории. Так бывает, что вот уже почти сверстал какой-то блок, но уперся в трудноисправимые баги. И тут в голову приходит идея как сверстать по-другому. Что делать, чтобы не потерять уже сверстанное? Сделать копию верстки и стилей и сохранить под другими именами? Или создать ветку в репозитории и там временно похранить? Можно, конечно, но неэлегантно. И лениво.</p>
<p>Элегантно — сохранить верстку в Локальной Истории, поставив метку с внятным комментарием.</p>
<p><a href="/images/post/2009-02-06-verstka-v-intellijidea-1/lh-3.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/lh-3-opt.png" alt="Local History"></a></p>
<p>Сохранить можно состояние как одного файла, так и целиком Проекта, то есть и HTML-верстку и CSS-файлы и картинки и скрипты.
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/lh-4.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/lh-4-opt.png" alt="Local History"></a></p>
<p>После этого можно пробовать реализовать второе решение, и если оно окажется хуже первого, парой кликов можно вернуться к сохраненному состоянию Проекта из Локальной Истории. Удобно же, как этим можно не пользоваться?</p>
<h1 id="diff">Diff</h1>
<p>Функциональность сравнивания &quot;чего-то&quot; с &quot;чем-то&quot; в Идее есть по умолчанию.
Заканчивая тему SVC, приведу скриншот diff локального файла с этим же файлом в репозитории
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-7.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/vsc-7-opt.png" alt="VSC"></a></p>
<p>А вообще существует три режима diff-а</p>
<ul>
<li>Compare Two Files — сравниаются два файла, выделенные одновременно в Project View</li>
</ul>
<ul>
<li>Compare File with Editor — сравнивается выделенный в Project View файл с файлом, который открыт в Editor View</li>
</ul>
<ul>
<li>Compare Selected with Clipboard — сравнивается выделенный фрагмент кода с тем, что лежит в буфере обмена</li>
</ul>
<p>В каждом из них мы перемещаемся в окно diff-а, аналогичное  тому, что на скриншоте выше. И в каждом есть активные кнопки для переноса изменений из одного файла в другой.</p>
<h1 id="-">Создание элементов кода</h1>
<p>Работая в IntelliJIDEA, есть возможность не думать о написании HTML-тегов и CSS-свойств. И я сейчас не о том волшебно-контекстном автокомплите, о котором я уже писал выше. Я говорю о легкой возможности мыслить не &quot;HTML-тегами&quot; и &quot;CSS-свойствами&quot;, а иными категориями, например, &quot;Раскладка страницы&quot; или  &quot;Межпроектный HTML-CSS Компонент&quot;. То есть как это?</p>
<p>Я уже упоминал, что Live Templates — это некие сокращения для ввода более полной версии текста — набрали <code>div</code>, нажали кнопку <strong>Tab</strong> и вместо введеных трех символов получили узел <code>&lt;div&gt;&lt;/div&gt;</code> в дереве элементов.</p>
<p>Такие сокращения можно сделать на все известные теги. <a href="http://pepelsbey.net/2008/11/zen-coding-1-2/">Огромную работу</a> в этом направлении проделал Вадим Макеев для редактора TextMate. И это значительно ускоряет набор кода. Но внутри IntelliJIDEA мы эту фичу используем не только так, а ещё и по-иному.</p>
<p>В группе HTML-верстки мы следуем Некой Идеологии, которая служит тому, чтобы достигать максимальной надежности и максимальной поддерживаемости кода. И как инструмент этой Иделогии развивается <a href="http://clubs.ya.ru/yacf/">Фреймворк</a>, о котором на Я.Субботнике <a href="http://video.yandex.ru/users/ya-events/tag/%D0%BF%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D0%BA%D0%B0/">рассказывал</a> Виталя.</p>
<p>Что это дает?
Вместо того, чтобы каждый раз писать анонимные теги, указывать им атрибуты класс и терять на этом время, потому что делаем мы это сотни раз в день, мы используем Live Template, который, к примеру, создает готовую верстку общепортального элемента &quot;Юзерпик&quot;</p>
<p>LT <code>b-userpic</code> превратится во фрагмент дерева</p>
<pre><code>&lt;!-- b-userpic --&gt;
&lt;i class=&quot;b-userpic&quot;&gt;
    &lt;img src=&quot;&quot; alt=&quot;&quot;/&gt;
    &lt;b&gt;&lt;/b&gt;
&lt;/i&gt;
</code></pre><p>К слову, элемент b-userpic — часть Яндекс.Фреймворка. В этом компоненте решена проблема выравнивания юзерпика в неком плейсхолдере (25х25 или 50х50 или 100х100) по вертикали и горизонтали, когда размеры самой картинки не известны. Спасибо <a href="http://cssing.org.ua">Юре Артюху</a> за идею и <a href="http://vitaly.harisov.name">Витале Харисову</a> за то, что её раскопал в <a href="http://cssing.org.ua/2005/07/14/vertical-align-middle/">архивах cssing.org.ua</a> и добавил в код элегантности :)</p>
<p>Или вот еще примеры Live Templates, которые ускоряют создание CSS-кода (в комментариях я пишу LT, справа от комментария — код, который разворачивается вместо LT):</p>
<p>At-символ — шоткат для быстрого создания импорта. Внутри скобок работает автокомплит имен файлов Проекта</p>
<pre><code>/* @ */        @import url(…);
</code></pre><p>На каждое CSS-свойство написан свой LT, который раскрывается в полную запись.</p>
<pre><code>/* poa */    position: absolute;
/* por */    position: relative;
</code></pre><p>Если CSS-свойство составное, то в нужных нам местах Идея предложит ввести нужные значения</p>
<pre><code>/* bau */    background: [color]url(…) no-repeat[position]
</code></pre><p>По аналогии с HTML, использовать LT можно и для вывода узкоспециализированых значений.
В Яндексе используется два шрифта в строго указанных размерах. Я об этом не думаю вообще, потому что есть такие LT:</p>
<pre><code>/* fa */    font: 100% Arial, sans-serif;
/* fv */    font: 80% Verdana, sans-serif;
</code></pre><p>Очень облегчают работу LT, которые позволяют создавать кроссбраузерные решения. Например до тех пор, пока не уйдет на покой Firefox 2, для создания инлайн-блока мы будем использовать LT <code>dib</code>.</p>
<pre><code>/* db */    display: block;
/* di */    display: inline;
/* dib */    display: -moz-inline-block; display: inline-block;
</code></pre><p>Ну и эти два LT, как иллюстрация к кроссбраузерным решениям. Что они делают, я уверен, понятно.</p>
<pre><code>/* bsb */    box-sizing: border-box; -moz-box-sizing: border-box; -webkit-box-sizing: border-box
/* bsc */    box-sizing: content-box; -moz-box-sizing: content-box; -webkit-box-sizing: content-box
</code></pre><p>Что нужно понять из этих примеров? То, что мы пишем код фрагментами, а не HTML-тегами/CSS-свойствами. То, что максимально используя ливтеплейты, мы переносим задачу по формированию логических кусков нашего кода на плечи робота. А себе оставляем только творчество :)</p>
<p>Но творчество не в смысле: «Я художник — я так вижу». Нет :)
Творчество в смысле сверстать так хорошо, чтобы сделать верстку максимально надежной, легко поддерживаемой и добиться соответствия эскизу.</p>
<h1 id="code-inspection">Code Inspection</h1>
<p>Вот та фича, из-за которой я не покину IntelliJIDEA. В чем ее бенефит?
Чтобы её оценить, вам придется кое-что сделать в Idea.</p>
<ol>
<li>Создайте два новых пустых файла и скопируйте в них соответствующий доктайп:
В HTML-файл</li>
</ol>
<pre><code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;
</code></pre><p>В XHTML-файл</p>
<pre><code>&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;
</code></pre><ol>
<li>В оба файла скопируйте каркасную структуру</li>
</ol>
<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Презентация&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

    &lt;ul&gt;
        &lt;li&gt;
            item
        &lt;/li&gt;
    &lt;/ul&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre><ol>
<li>Теперь как бы невзначай удалите закрывающем теге li первую скобку. В обоих файлах, чтобы получилось так:</li>
</ol>
<pre><code>&lt;li&gt;
    item
/li&gt;
</code></pre><p>А теперь смотрим, что в XHTML-файле, в отличие от HTML, справа на полях появился блок красного цвета. Это включились в работу Инспекторы кода, которые сообщают нам об ошибке в коде.
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/code-inspection-1.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/code-inspection-1-opt.png" alt="Code Inspection"></a></p>
<h1 id="-">Веллформность</h1>
<p>Вообще-то, этот пример с пропущенным закрытым тегом банален. Ну, в самом-то деле, редактор распарсил xml документ и обнаружил, что дерево узлов сломано. То есть not well-formed — неправильно оформлено, по-русски. Проверка на веллформность — это полезная фича, но ничего сногсшибательного, — много говорить о ней нечего. А тот факт, что я узнал о ней сразу, как только ошибся в коде — об этом говорить уже можно с восторгом, потому что IntelliJIDEA ответила на незаданный мной вопрос: &quot;А не слажал ли я случайно?&quot;. &quot;Да, слажал&quot;, — ответила мне Идея радостно и стрельнула в глаз красным. &quot;Ой!&quot;, — сказал я, и тут же (сразу же!) исправил ошибку.</p>
<h1 id="-">Валидность</h1>
<p>Но тем не менее, инспекция веллформности впечатляет меня меньше, чем валидация кода на лету. Прошу вас осознать этот факт — за валидностью своего кода я не слежу вообще, потому что эту часть на себя тоже забрала Идея.</p>
<p>Помните, когда я говорил про контекстный автокомплит, я показывал скриншот из которого понятно, что внутри <code>&lt;p&gt;</code> по спецификации не может быть блочного элемента.
<img src="/images/post/2009-02-06-verstka-v-intellijidea-1/autocomplete.png" alt="Autocomplete"></p>
<p>Но что будет, если я все таки напишу внутри параграфа блочный элемент?</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/code-inspection-2.png" alt="Code Inspection"></p>
<p>Я увижу в правом верхнем углу документа красный индикатор. То есть в документе есть ошибки. А еще Идея мне подсветит красным невалидный код, и при наведении на него расскажет, в чем конкретно ошибка. А ещё покажет ошибку справа на полях (для быстрого перехода к ней по клику).</p>
<p>То есть, когда вы совершаете ошибку, и документ становится невеллформным или невалидным, вы узнаете об этом сразу же, а не после того, как откроете документ в Firefoxe (с плагином HTML Validator) и не после того, как документ уйдет в тестирование и вам напишут багрепорт об ошибке валидации. Осознайте этот бенефит для своей эффективности.</p>
<p>На мой взляд, IntelliJIDEA — единственный редактор, который так элегантно, ненавязчиво и эффективно позволяет а) не допускать ошибки валидации и б) исправлять их очень быстро.</p>
<h3 id="-css-">Кириллица в CSS-селекторах</h3>
<p>Завершая тему Инспекторов Кода.
Если существовал такой человек, который продумал расположение символов двух языков на одной кнопке (рус/англ), то этот человек был с оригинальным чувством юмора. Например, он подложил свинью разработчикам, когда на одной кнопке расположил латинскую «C» и кириллическую «С». Предполагаю, что он злорадно потирал ладошки и ехидно хихикал, когда представлял себе, как разработчики будут чертыхаться и силиться понять, почему CSS-селектор, в котором всё написано правильно, не применяется к элементу.  А проблема лишь в том, что в английском слове попалась кириллическая «С».</p>
<p>Может быть вы считаете, что этот юзкейз притянут за уши?  Ну-ну ;) Если Идеей не пользуетесь, тогда просто запомните этот смешной юзкейз на будущее, очень может быть, он сэкономит вам много времени ;)</p>
<p>Но работая в Идее, об этом можно не думать — она явным образом указывает на то, что в коде появился кириллический символ в неположенном месте.</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/code-inspection-3.png" alt="Code Inspection"></p>
<h1 id="quirks-mode-plugin">Quirks Mode Plugin</h1>
<p>Quirks Mode Plugin идет в поставке и он на лету проверят  HTML/XHTML код на кроссбраузерность. Насколько я понимаю, разработчики плагина взяли данные с сайта Питера-Пол Коха <a href="http://www.quirksmode.org/">http://www.quirksmode.org/</a></p>
<p><img src="http://www.jetbrains.com/idea/features/screenshots/70/htmlQuicksMode.gif" alt="HTML/XHTML code inspections">
Ума не приложу, как можно было реализовать проверку моего кода на кроссбраузерность по тесткейсам Питера. Но ребята из JetBrains смогли. Функциональность востребованная.</p>
<h1 id="-">Удобная работа с текстом</h1>
<p>Вообще-то удовольствия в работе верстальщика маловато, потому что, как я уже говорил, приходится писать один и тот же набор HTML-тегов и CSS-свойств каждый день по-многу раз в день.  И если Live Templates нам помогли ускорить создание элементов кода, то всё равно есть такие действия, на которые макросов не напишешь.</p>
<p>Это какие? Насколько часто вам приходится фрагменты кода выделять, копировать, вырезать, вставлять, перемещать в документе, искать по документу, заменять и рефакторить? Мне очень часто. И до знакомства с таким понятием, как IDE, я не знал, что работа с текстовыми строками может приносить удовольствие, а не утомление.</p>
<p>Я сейчас покажу часть шоткатов, которые наряду с привычными (типа <strong>Cmd V</strong> - вставить из буфера) упрощают рутинные действия и ускоряют работу.</p>
<p><strong>Cmd C</strong></p>
<p>Скопировать в буфер строку под курсором. Выделять строку не нужно</p>
<p><strong>Cmd X</strong></p>
<p>Вырезать в буфер строку под курсором. Выделять строку не нужно</p>
<p><strong>Cmd Y</strong></p>
<p>Удалить строку под курсором. Выделять строку не нужно</p>
<p><strong>Cmd D</strong></p>
<p>Дублировать строку под курсором. Выделять строку не нужно</p>
<p><strong>Cmd Shift ArrowUp</strong></p>
<p>Переместить строку под курсором на одну вверх. Выделять строку не нужно</p>
<p><strong>Cmd Shift ArrowDown</strong></p>
<p>Переместить строку под курсором на одну вниз. Выделять строку не нужно</p>
<p><strong>Cmd L</strong></p>
<p>Выделить строку под курсором</p>
<p><strong>Ctrl W</strong></p>
<p>Выделить слово под курсором. Повторное нажатие расширяет выделение до логического родителя — предложение в текстовом блоке или тег родительского элемента в дереве. Используется Ctrl, потому что Cmd занят (см. ниже)</p>
<p><strong>Selection -&gt; Cmd D</strong></p>
<p>Выделить подстроку или строки и дублировать выделенное</p>
<p><strong>Cmd /</strong></p>
<p>Закомментировать строку под курсором строчным комментарием</p>
<p><strong>Selection -&gt; Cmd /</strong></p>
<p>Выделить фрагмент и закомментировать выделенное строчными комментариями. Фрагмент может быть многострочным или частью строки</p>
<p><strong>Selection -&gt; Cmd Shift /</strong></p>
<p>Выделить фрагмент и закомментировать выделенное блочным комментарием. Фрагмент может быть многострочным или частью строки</p>
<p><strong>Alt Fn Backspace</strong></p>
<p>Удалить всё до начала следующего слова. Как вариант использования, стать в конце строки и по вызову хоткея удалить все пробельные символы до начала следующей строки. Но есть более правильный.</p>
<p><strong>Cmd Shift J</strong></p>
<p>Нативный способ склеить последующую строку со строкой под курсором. Не нужно становиться в конец строки</p>
<p><strong>Shift Cmd Fn Backspace</strong></p>
<p>Удалить открывающий и закрывающий тег, не трогая его содержимое. Нужно стать курсором на удаляемый тег</p>
<p><strong>Cmd Plus/Minus</strong></p>
<p>Фолдинг элемента под курсором. Стоять курсором на элементе не нужно — достаточно стать на строку с элементом</p>
<p><strong>Shift Cmd Plus/Minus</strong></p>
<p>Фолдинг всего дерева в документе. Стоять курсором всё равно где ;)</p>
<p><strong>Fn Cmd ArrowLeft/Right</strong></p>
<p>Переместить курсор в начало/в конец файла.</p>
<p><strong>Fn Cmd ArrowUp/Down</strong></p>
<p>Переместить курсор в начало/в конец видимой частиэкрана. Это не листание по-странично, а именно одноразовое перемещение курсора вверх/вниз.</p>
<p><strong>Cmd J</strong></p>
<p>Контекстное меню для выбора Live Template. Для точного выбора (по первой букве) достаточно ввести в коде первую букву темплейта и нажать хоткей</p>
<p><strong>Selection -&gt; Alt Cmd J</strong></p>
<p>Контекстное меню для выбора Surround Live Template.</p>
<p><strong>Shift Cmd M</strong></p>
<p>Многострочный Replace.</p>
<p><strong>Shift Cmd N</strong></p>
<p>Быстрое открытие файла.</p>
<p><strong>Shift F6</strong></p>
<p>CSS Refactoring</p>
<p><strong>Cmd W</strong></p>
<p>Закрыть активный таб. Ничего необычного. Просто в хоткее <strong>Ctrl W</strong> я сюда сослался :)</p>
<p>Если вы не пользователь Mac OS, то читать их нужно так: <strong>Cmd</strong> соотвествует <strong>Ctrl</strong>, сочетание <strong>Fn Backspace</strong> соотвествует <strong>Delete</strong></p>
<p>Не могу сказать, что в других IDE похожих хоткеев нет. Есть конечно.
Но операций с целыми строками без предварительного выделения строки я до IntelliJIDEA нигде не встречал. А сейчас я не представляю себе эффективную работу без них.</p>
<h1 id="-">Навигация</h1>
<p>Вот, кстати, в списке шоткатов промелькнул неприметный и, наверное, непонятный <strong>Shift Cmd N</strong>. А ведь я нажимаю этот хоткей раз 100 в день.  Он рождает мне маленький диаложек, который ожидает от меня ввода имени файла.
<img src="/images/post/2009-02-06-verstka-v-intellijidea-1/file-open-1.png" alt="File Open"></p>
<p>И знаете, какой у меня usecase сотня раз на дню? Мне нужно открыть файл на редактирование, но имени его я &quot;...не помню. Помню только... первые три буквы&quot; (с) М.Галустян.</p>
<p>И что мне делать? Искать нужный файл глазами в немаленькой файловой структуре Проекта? Это же так долго и утомительно. Тем более, если не помнишь точно, как он называется, и, соответственно, в какой конкретно папке его искать. А этот диаложек подсказывает нужные мне файлы по маске</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/file-open-2.png" alt="File Open"></p>
<p>А если надо ограничить поиск по типам файлов, то есть фильтр</p>
<p><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/file-open-3.png" alt="File Open"></p>
<p>А у Java-программистов есть еще поиск по символу и по имени класса (мечтательно вознеся глаза к небу).</p>
<p>Я хотел бы, чтобы вы меня поняли — навигироваться по Проекту можно не открывая Project Panel. Как найти любой файл я рассказал. А еще можно переходить к любому ресурсу прямо из кода.</p>
<p>Например, <strong>Cmd Click</strong> на имени CSS-селектора в HTML-коде провалит меня в файл с этим селектором. Если селектор написан не в одном файле, то будет предложен выбор.
<img src="/images/post/2009-02-06-verstka-v-intellijidea-1/file-open-4.png" alt="File Open">
Правда, хотелось бы в этом попапе видеть пути к файлам вместо имени Idea-Module. Мне это только что в голову пришло, надо зарепортить импрувмент в JetBrains.</p>
<p>Тот же принцип с файлами скриптов и картинок — <strong>Cmd Click</strong> по пути к ресурсу прокидывает в него.</p>
<p>Кстати, я говорил, что картинки можно просматривать к IntelliJIDEA? Размер посмотреть, объем, битность. А большего в IDE и не нужно, на мой взгляд.
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/file-open-5.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/file-open-5-opt.png" alt="File Open"></a></p>
<h1 id="-css">Рефакторинг CSS</h1>
<p>Еще в списке шоткатов промелькнул <strong>Shift F6</strong>. Как им пользоваться и что он делает? Если стать на имени CSS-класса в CSS-селекторе и нажать хоткей, то появится такой диалог
<a href="/images/post/2009-02-06-verstka-v-intellijidea-1/css-refactoring.png"><img src="/images/post/2009-02-06-verstka-v-intellijidea-1/css-refactoring-opt.png" alt="CSS Refactoring"></a>
Если в нем изменить имя CSS-селектора, то он изменится во всех файлах Проекта. Разработчики IntelliJIDEA вот так <a href="http://www.jetbrains.com/idea/features/html_css_editor.html#Refactoring">говорят</a> об этой функциональности:</p>
<blockquote>
<p>This important feature is a real time-saver which additionally guarantees the consistency of the refactored code.</p>
</blockquote>
<p>Я, вообще-то, люблю делать ежедневный рефакторинг. А эта фича в рефакторинге незаменима — быстрый результат и гарантированное качество. Проверено на себе. Рекомендую.</p>
<h1 id="-">Калейдоскоп возможностей</h1>
<p>А теперь коротенько о разнообразных IDEA-вкусностях словами самих JetBrains-овцев и будем заканчивать.</p>
<h3 id="-">Размер картинок</h3>
<p>Работая в IntelliJIDEA, вам не нужно думать о реальных размерах контентных картинок. Вам сообщат :)</p>
<p><img src="http://www.jetbrains.com/idea/features/img/imgSizeCheckFix.gif" alt="Image size"></p>
<h3 id="-html-">Инспекция HTML-атрибутов</h3>
<p>Работая в IntelliJIDEA, у вас не получится написать один и тот же атрибут дважды. Вам сообщат :)</p>
<p><img src="http://www.jetbrains.com/idea/features/img/duplicateAttributeHTML_smal.gif" alt=""></p>
<h3 id="-css-">Инспекция CSS-свойств и селекторов</h3>
<p>Работая в IntelliJIDEA, у вас не получится ошибиться в написании CSS-свойств, их значений и, например, псевдоклассов</p>
<p><img src="http://www.jetbrains.com/idea/features/img/invalidPseudoClassCSS_small.gif" alt=""></p>
<p>А еще у вас всегда под рукой будут vendor-specific CSS-свойства, и инспекция ошибок в их написании:</p>
<p><img src="http://www.jetbrains.com/idea/features/screenshots/80/cssCompletionBrowserSpec.gif" alt=""></p>
<p>И небольшой импрувмент — на поле слева от CSS-свойства можно видеть цветной квадратик.  Для наглядности</p>
<p><img src="http://www.jetbrains.com/idea/features/screenshots/80/cssGutterColor.gif" alt=""></p>
<p>А если надо быстро цвет заменить во всем проекте, то знакомый вам <strong>Shift F6</strong> поможет это сделать быстро и гарантированно без ошибок. Без ошибок еще и потому, что ввести в поле вы можете только символы <code>#</code>, <code>1-9</code>, <code>a-f</code> или зарезервированные слова</p>
<p><img src="http://www.jetbrains.com/idea/features/screenshots/80/cssColorRefactoring.gif" alt=""></p>
<h3 id="show-applied-styles-for-tag">Show Applied Styles for Tag</h3>
<p>Не выходя из IntelliJIDEA, вы всегда сможете увидеть CSS-стили, которые применяются к нужному вам HTML-элементу</p>
<p><img src="http://www.jetbrains.com/idea/features/img/tagAppliedStyles_small.gif" alt=""></p>
<h3 id="css-autocomplete">CSS Autocomplete</h3>
<p>Помните, я говорил, что IntelliJIDEA в XML-е подсказывает имена использованных элементов? Ну так вот, в CSS вы имеете то же самое — вам подскажут имена существующих CSS-классов</p>
<p><img src="http://www.jetbrains.com/idea/features/img/cssClassCompletion_small.gif" alt="css-autocomplete"></p>
<h3 id="-html-xhtml">Хлебные крошки в HTML/XHTML</h3>
<p>Работая в IntelliJIDEA, вы не заблудитесь в чужом неряшливом коде. Вас выведут по хлебным крошкам</p>
<p><img src="http://www.jetbrains.com/idea/features/screenshots/70/htmlCrumbs.gif" alt="Хлебные крошки"></p>
<h3 id="navigation-bar">Navigation Bar</h3>
<p>Работая в IntelliJIDEA, вы всегда можете получить доступ к нужному вам файлу, не открывая Project Panel. Вам поможет плавающая панели навигации <strong>Fn Alt ArrowLeft</strong></p>
<p><img src="http://www.jetbrains.com/idea/features/screenshots/60/NaviBar.jpg" alt="Navigation Bar"></p>
<h3 id="javascript-debugger">Javascript debugger</h3>
<p>В своей работе я не пишу такие скрипты, которые требуют дебага, потому что у меня такая специализация, что production-скрипты пишу не я, а другие крутые парни. Поэтому про дебаг я не могу ничего от себя рассказать. Но то, что он есть, и судя по видео, он удобен, я вам сказать могу :)
Приглашаю вас посмотреть <a href="http://www.jetbrains.com/idea/training/demos/javascript-debugger.html">online-demo</a> на сайте JetBrains.</p>
<p>А еще обязательно загляните на страничку с <a href="http://www.jetbrains.com/idea/features/javascript_editor.html">описанием поддержки Javascript</a>. Там вам будет чему порадоваться :)</p>
<h3 id="-eclipse">Взаимодействие с Eclipse</h3>
<blockquote>
<p>You can export, import and synchronize IntelliJ IDEA projects with Eclipse, enabling all of your team members to take advantage of using their favorite IDE. Plus, IntelliJ IDEA supports Eclipse format of storing dependencies, letting you share the single code base within mixed-IDE team.</p>
</blockquote>
<p>Познакомиться с этой функциональностью можно <a href="http://www.jetbrains.com/idea/features/eclipse_java.html">здесь</a></p>
<h3 id="-">Единые настройки для команды</h3>
<p>В версии 8.1 появилась возможность хранить все свои настройки IntelliJIDEA <a href="http://www.jetbrains.net/devnet/docs/DOC-1143">на IDEA Sharing Server</a>. Сейчас туда можно только логиниться под своим аккаунтом. Но скоро настройки среды можно будет шарить в команде и между командами.</p>
<p>В группе HTML-верстки Яндекса используются свои настройки, которыми поделиться с вами мы пока не можем, потому что... ну кривоватый способ мы выбрали (подкладывание файликов IDEA-настроек с помощью shell-скрипта). <a href="http://aefimov.livejournal.com/">Алексей Ефимов</a> согласился помочь написать плагин, который будет устанавливать наши настройки нативным образом. Когда Алексей его напишет, и если до того момента IDEA Sharing Server не запустится, я выложу ссылку на плагин.</p>
<p>И вот на этом я, пожалуй, остановлюсь :)</p>
<h1 id="-">Резюме</h1>
<p>Если вы таки дочитали до этих строк, то у вас однозначно есть две отличных черты характера — усидчивость и желание учиться новому. И я рад, что в мой блог заглянул именно такой читатель, как вы. :)</p>
<p>В этой статье я старался показать как именно работа в IntelliJIDEA повышает мою эффективность. И намекнуть вам, что ваша эффективность тоже может стать выше.</p>
<p>Мне хочется, чтобы после прочтения статьи стала понятна одна вещь: у меня не было цели доказать, что IDEA превосходит все существующие редакторы. Ставить такую цель бесполезно и слишком самонадеянно. Глупо и по-детски :) Я лишь хотел показать известные мне бенефиты Идеи, которые лично для меня определяют выбор именно этого редактора. Станет ли вам удобно в Идее — круто, буду рад. Но если описанные возможности Идеи (в целом) вас не впечатлили — я, в-общем то, не расстроюсь.</p>
<p>Единственное, что меня может опечалить — это комменты в духе &quot;каких-то особых фич, которые дают преимущество этой IDE перед остальными, я не увидел. Статья — всего лишь акт поклонения любимому софту.&quot;  Наличие таких комментариев для меня будет означать, что их авторы не поняли цели моего мессаджа, и это целиком моя вина — не смог донести свой смысл.</p>
<p><strong>Я искренне надеюсь, что описанные мной знания смогут Вам помочь верстать быстрее, эффективнее и качественнее. Успехов Вам!</strong></p>
</div></div><div class="comments" data-block="comments" id="disqus_thread"></div><div class="footer" data-block="footer">Powered by <a href="http://github.com/bevis-ui">BEViS</a></div><script src="../../../../build/build.min.js" type="text/javascript"></script><script src="//bevisblog.disqus.com/embed.js" type="text/javascript"></script><script src="http://yandex.st/highlightjs/8.0/highlight.min.js" type="text/javascript"></script><script type="text/javascript">hljs.initHighlightingOnLoad();</script></body></html>