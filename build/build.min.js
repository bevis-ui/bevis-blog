!function(e){var t,n={NOT_RESOLVED:0,IN_RESOLVING:1,RESOLVED:2},i={trackCircularDependencies:!0},r={},o=[],s=!1,a=[],l=function(e,i,s){s||(s=i,i=[]);var a=r[e]||(r[e]={name:e,decl:t});o.push(a.decl={name:e,fn:s,state:n.NOT_RESOLVED,deps:i,prevDecl:a.decl,dependOnDecls:[],dependents:[],exports:t})},c=function(e,t){s||(s=!0,D(f)),a.push({modules:e,cb:t})},u=function(e){return!!r[e]},f=function(){s=!1,h(),d()},h=function(){for(var e,n,i,s,a=0;e=o[a++];){for(n=0,s=e.dependOnDecls;i=e.deps[n++];){if(!u(i)){k(i,e);break}s.push(r[i].decl)}e.prevDecl&&(s.push(e.prevDecl),e.prevDecl=t)}o=[]},d=function(){var e,t,n,i,o,s=a,l=0;for(a=[];e=s[l++];){for(t=0,i=[],o=!0;n=e.modules[t++];){if(!u(n)){k(n),o=!1;break}i.push(r[n].decl)}o&&_(i,e.cb)}},_=function(t,n){p(t,function(t){n.apply(e,t)},[])},p=function(e,t,r){var o=e.length,s=!0;if(o)for(var a,l=function(){--o||m(e,t)},c=0;a=e[c++];)a.state===n.RESOLVED?--o:(i.trackCircularDependencies&&y(a,r)&&N(a,r),a.state===n.NOT_RESOLVED&&v(a,r),a.state===n.RESOLVED?--o:(a.dependents.push(l),s=!1));s&&!o&&m(e,t)},m=function(e,t){for(var n,i=[],r=0;n=e[r++];)i.push(n.exports);t(i)},v=function(t,r){i.trackCircularDependencies&&(r=r.slice()).push(t),t.state=n.IN_RESOLVING;var o=!1;p(t.dependOnDecls,function(n){t.fn.apply({name:t.name,deps:t.deps,global:e},[function(e){return o?w(t):o=!0,g(t,e),e}].concat(n))},r)},g=function(e,i){e.exports=i,e.state=n.RESOLVED;for(var r,o=0;r=e.dependents[o++];)r(e.exports);e.dependents=t},y=function(e,t){for(var n,i=0;n=t[i++];)if(e===n)return!0;return!1},b=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t])},E=function(e){D(function(){throw e})},k=function(e,t){E(Error(t?'Module "'+t.name+'": can\'t resolve dependence "'+e+'"':"Can't resolve required module \""+e+'"'))},N=function(e,t){for(var n,i=[],r=0;n=t[r++];)i.push(n.name);i.push(e.name),E(Error('Circular dependence detected "'+i.join(" -> ")+'"'))},w=function(e){E(Error('Declaration of module "'+e.name+'" already provided'))},D=function(){var t=[],n=function(e){return 1===t.push(e)},i=function(){var e=t,n=0,i=t.length;for(t=[];i>n;)e[n++]()};if("object"==typeof process&&process.nextTick)return function(e){n(e)&&process.nextTick(i)};if(e.setImmediate)return function(t){n(t)&&e.setImmediate(i)};if(e.postMessage){var r=!0;if(e.attachEvent){var o=function(){r=!1};e.attachEvent("onmessage",o),e.postMessage("__checkAsync","*"),e.detachEvent("onmessage",o)}if(r){var s="__modules"+ +new Date,a=function(e){e.data===s&&(e.stopPropagation&&e.stopPropagation(),i())};return e.addEventListener?e.addEventListener("message",a,!0):e.attachEvent("onmessage",a),function(t){n(t)&&e.postMessage(s,"*")}}}var l=e.document;if("onreadystatechange"in l.createElement("script")){var c=function(){var e=l.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,i()},(l.documentElement||l.body).appendChild(e)};return function(e){n(e)&&c()}}return function(e){n(e)&&setTimeout(i,0)}}(),C={define:l,require:c,isDefined:u,options:b};"object"==typeof exports?module.exports=C:e.modules=C}(this),"undefined"!=typeof module&&(modules=module.exports),modules.define("block",["inherit","event-emitter","event-manager","block-event","jquery","vow","bt","extend"],function(e,t,n,i,r,o,s,a,l){function c(e){return"string"==typeof e?""===e&&(e=!1):e="number"==typeof e?String(e):Boolean(e),e}var u=t(n,{__constructor:function(e,t){e||(t=t||{},e=this._createDomElement(t)),t?t.__complete||(t=l(t,this.__self._getDomNodeOptions(e).options||{})):t=this.__self._getDomNodeOptions(e).options||{};var n=this.__self._getDomNodeDataStorage(e);n.blocks[this.__self.getBlockName()]=this,this._options=t,this._node=e,this._eventManager=new i(this),this._stateCache=null,this.__self._liveInitIfRequired(),this._cachedViewName=null},destruct:function(){this._destructed||(this.offAll(),this._eventManager.unbindAll(),this._eventManager=null,this._options=null,this._node=null,this._stateCache=null,this._destructed=!0)},getDomNode:function(){return this._node},_bindTo:function(e,t,n){return this._eventManager.bindTo(e,t,n),this},_unbindFrom:function(e,t,n){return this._eventManager.unbindFrom(e,t,n),this},emit:function(e,t){if("string"==typeof e&&(e=new r(e)),e.data=t,e.target=this,this.__base(e.type,e),!e.isPropagationStopped()){var n=o.Event(this.__self._getPropagationEventName(e.type));e._jqEvent=n;var i=this.getDomNode();i&&this.getDomNode().trigger(n,e)}return this},getView:function(){if(null===this._cachedViewName){var e=this.getDomNode().attr("class");this._cachedViewName=e?e.split(" ").shift().split("_")[1]:void 0}return this._cachedViewName},_setState:function(e,t){1===arguments.length&&(t=!0),t=c(t);var n=this.getDomNode();this._stateCache||(this._stateCache=this._parseStateCssClasses(n));var i=this._stateCache[e]||!1;return t!==i&&(this._stateCache[e]=t,i&&n.removeClass("_"+e+(i===!0?"":"_"+i)),t&&n.addClass("_"+e+(t===!0?"":"_"+t))),this},_removeState:function(e){return this._setState(e,!1)},_getState:function(e){return this._stateCache||(this._stateCache=this._parseStateCssClasses(this.getDomNode())),this._stateCache[e]||!1},_toggleState:function(e,t,n){t=c(t),n=c(n);var i=this._getState(e);return i===t?this._setState(e,n):i===n&&this._setState(e,t),this},_setElementState:function(e,t,n){if(!e)throw new Error("`domNode` should be specified for `_setElementState` method.");e=o(e),2===arguments.length&&(n=!0),n=c(n);var i=this._parseStateCssClasses(e),r=i[t];return r&&e.removeClass("_"+t+(r===!0?"":"_"+r)),n&&e.addClass("_"+t+(n===!0?"":"_"+n)),this},_removeElementState:function(e,t){return this._setElementState(e,t,!1)},_getElementState:function(e,t){if(e){e=o(e);var n=this._getElementName(e);if(n)return this._parseStateCssClasses(e)[t]||!1;throw new Error("Unable to get BEM Element name from DOM Node.")}throw new Error("`domNode` should be specified for `_getElementState` method.")},_toggleElementState:function(e,t,n,i){n=c(n),i=c(i);var r=this._getElementState(e,t);return r===n?this._setElementState(e,t,i):r===i&&this._setElementState(e,t,n),this},_findElement:function(e,t){return this._findAllElements(e,t)[0]},_findAllElements:function(e,t){t=t?o(t):this.getDomNode();for(var n=this.getView(),i=t.find("."+this.__self.getBlockName()+(n?"_"+n:"")+"__"+e),r=[],s=i.length,a=0;s>a;a++)r.push(o(i[a]));return r},_getOptions:function(){return this._options},_getElementOptions:function(e){if(e){e=o(e);var t=this._getElementName(e);if(t)return this.__self._getDomNodeOptions(e).options||{};throw new Error("Unable to get BEM Element name from DOM Node.")}throw new Error("`domNode` should be specified for `_getElementOptions` method.")},_createDomElement:function(e){return o(a.apply(l({},e,{block:this.__self.getBlockName()})))},_parseStateCssClasses:function(e){var t={},n=e.attr("class");if(n)for(var i=n.split(" "),r=i.length-1;r>=0;r--)if("_"===i[r].charAt(0)){var o=i[r].substr(1).split("_");t[o[0]]=2===o.length?o[1]:!0}return t},_getElementName:function(e){var t=this.getView(),n=(e[0].className||"").match(new RegExp(this.__self.getBlockName()+(t?"_"+t:"")+"__([a-zA-Z0-9-]+)(?:\\s|$)"));return n?n[1]:null}},{getBlockName:function(){return"block"},fromDomNode:function(e,t){if(!e)throw new Error("`domNode` should be specified for `findDomNode` method");var n=this.getBlockName();if(e=o(e),!e.length)throw new Error('Cannot initialize "'+n+'" from empty jQuery object');var i=this._getDomNodeDataStorage(e),r=i.blocks[n];if(!r){e.addClass(this._autoInitCssClass),void 0===t&&(t=this._getDomNodeOptions(e).options||{}),t.__complete=!0;var s=this;r=new s(e,t)}return r},initOnDomNode:function(e,t){var n;if(this._liveInit){if(this._liveInitIfRequired(),n=!1,this._instantInitHandlers)for(var i=0,r=this._instantInitHandlers.length;r>i;i++)if(this._instantInitHandlers[i](t,e)){n=!0;break}}else n=!0;return n?(e=o(e),this.fromDomNode(e,t)):null},_liveInitIfRequired:function(){var e=this.getBlockName();!this._liveInit||this._liveInitialized&&this._liveInitialized[e]||(this._liveInit(),(this._liveInitialized=this._liveInitialized||{})[e]=!0)},_liveInit:null,_instantInitIf:function(e){this._instantInitHandlers||(this._instantInitHandlers=[]),this._instantInitHandlers.push(e)},_liveBind:function(e,t){var n=this;this._getLiveEventsScopeElement().on(e,'[data-block="'+this.getBlockName()+'"]',function(e){t.call(n.fromDomNode(e.currentTarget),e)})},_liveBindToElement:function(e,t,n){var i=this,r=this.getBlockName(),s=['[class^="'+r+'_"][class$="__'+e+'"]','[class^="'+r+'_"][class*="__'+e+' "]'];this._getLiveEventsScopeElement().on(t,s.join(", "),function(e){n.call(i.fromDomNode(o(e.currentTarget).closest('[data-block="'+r+'"]')),e)})},_getLiveEventsScopeElement:function(){return o(document.body)},destructOnDomNode:function(e){e=o(e);var t=this.getBlockName(),n=this._getDomNodeDataStorage(e,!0);if(n&&n.blocks[t]){var i=n.blocks[t];i._destructed||i.destruct(),delete n.blocks[t]}},find:function(e){return this.findAll(e)[0]},findAll:function(e){if(!e)throw new Error("`parentElement` should be specified for `findAll` method");e=this._getDomNodeFrom(e);var t=e.find("[data-block="+this.getBlockName()+"]");if(t.length){for(var n=[],i=t.length,r=0;i>r;r++){var s=o(t[r]);n.push(this.fromDomNode(s))}return n}return[]},initDomTree:function(e){function t(e){var t=s.promise();return modules.isDefined(e)?(modules.require([e],function(n){i[e]=n,t.fulfill()}),t):null}if(!e)throw new Error("`domNode` should be specified for `initDomTree` method");e=this._getDomNodeFrom(e);var n="."+this._autoInitCssClass,i={},r=e.find(n);e.is(n)&&Array.prototype.unshift.call(r,e);for(var a=[],l=r.length,c=0;l>c;c++){var u=o(r[c]),f=this._getDomNodeOptions(u)||{},h=u.attr("data-block");if(h){a.push({node:u,className:h,options:f.options||{},isMixin:!1}),i[h]=null;var d=f.mixins;if(d)for(var _=0,p=d.length;p>_;_++){var m=d[_];m&&m.name&&(a.push({node:u,className:m.name,blockName:h,options:m,isMixin:!0}),i[m.name]=null)}}}return s.fulfill().then(function(){return s.all(Object.keys(i).map(function(e){return t(e)})).then(function(){for(var e=a.length,t=0;e>t;t++){var n=a[t],r=n.node,o=n.className,s=n.options,l=i[o];if(l)try{if(n.isMixin){var c=i[n.blockName];c&&l.fromBlock(c.fromDomNode(r),s)}else l.initOnDomNode(r,s)}catch(u){throw u.message=o+" init error: "+u.message,u}}})})},destructDomTree:function(e){if(!e)throw new Error("`domNode` should be specified for `destructDomTree` method");e=this._getDomNodeFrom(e);var t="."+this._autoInitCssClass+",."+this._delegateEventsCssClass,n=e.find(t);e.is(t)&&Array.prototype.unshift.call(n,e);for(var i=0;i<n.length;i++){var r=o(n[i]),s=this._getDomNodeDataStorage(r,!0);if(s){var a=s.blocks;for(var l in a)a.hasOwnProperty(l)&&a[l].__self.destructOnDomNode(r);s.blocks={};var c=s.blockEvents;for(l in c)c.hasOwnProperty(l)&&c[l].offAll();s.blockEvents={}}}},getEmitter:function(e){e=this._getDomNodeFrom(e);var t=this._getDomNodeDataStorage(e),n=this.getBlockName(),i=t.blockEvents[n];return i||(e.addClass(this._delegateEventsCssClass),i=new f(this,e),t.blockEvents[n]=i),i},_getDomNodeFrom:function(e){if(!e)throw new Error("jQuery element, DOM Element or Block instance should be specified");return e instanceof u&&(e=e.getDomNode()),e=o(e)},_getDomNodeOptions:function(e){var t=e.attr("data-options");return t?JSON.parse(t):{}},_getDomNodeDataStorage:function(e,t){var n=e.data("block-storage");return n||t||(n={blocks:{},blockEvents:{}},e.data("block-storage",n)),n},_getPropagationEventName:function(e){return"block/"+this.getBlockName()+"/"+e},_autoInitCssClass:"_init",_delegateEventsCssClass:"_live-events"}),f=t(n,{__constructor:function(e,t){this._blockClass=e,this._domNode=t,this._listeners={}},_onAddEvent:function(e){function t(t,i){n.emit(e,i),i.isPropagationStopped()&&t.stopPropagation()}var n=this,i=this._blockClass._getPropagationEventName(e);this._domNode.on(i,t),this._listeners[e]=t},_onRemoveEvent:function(e){var t=this._blockClass._getPropagationEventName(e);this._domNode.off(t,this._listeners[e]),delete this._listeners[e]}});e(u)}),modules.define("inherit",function(e){function t(e){var t=s(e);if(h)for(var n,i=0;n=p[i++];)e.hasOwnProperty(n)&&t.push(n);return t}function n(e,n,r){for(var o,s,a=t(r),l=0,c=a.length;c>l;)o=a[l++],s=r[o],n[o]=u(s)&&(!i||s.toString().indexOf(".__base")>-1)?function(t,n){var i=e[t]||f;return function(){var e=this.__base;this.__base=i;var t=n.apply(this,arguments);return this.__base=e,t}}(o,s):s}var i=function(){"_"}.toString().indexOf("_")>-1,r=function(){},o=Object.create||function(e){var t=function(){};return t.prototype=e,new t},s=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},a=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},l=Object.prototype.toString,c=Array.isArray||function(e){return"[object Array]"===l.call(e)},u=function(e){return"[object Function]"===l.call(e)},f=function(){},h=!0,d={toString:""};for(var _ in d)d.hasOwnProperty(_)&&(h=!1);var p=h?["toString","valueOf"]:null,m=function(){var e=arguments,i=c(e[0]),s=i||u(e[0]),l=s?i?e[0][0]:e[0]:r,f=e[s?1:0]||{},h=e[s?2:1],d=f.__constructor||s&&l.prototype.__constructor?function(){return this.__constructor.apply(this,arguments)}:function(){};if(!s)return d.prototype=f,d.prototype.__self=d.prototype.constructor=d,a(d,h);a(d,l);var _=l.prototype,p=d.prototype=o(_);if(p.__self=p.constructor=d,f&&n(_,p,f),h&&n(l,d,h),i)for(var m,v,g,y,b,E=1,k=e[0];m=k[E++];)for(u(m)&&(a(d,m),m=m.prototype),v=t(m),y=0,b=v.length;b>y;)g=v[y++],"__self"!==g&&"__constructor"!==g&&"constructor"!==g&&(p[g]=m[g]);return d};m.self=function(e,t,i){var r=e.prototype;return t&&n(r,r,t),i&&n(e,e,i),e},e(m)}),modules.define("event-emitter",["inherit"],function(e,t){var n=Array.prototype.slice,i=t({on:function(e,t,n){this._events||(this._events={});var i={callback:t,context:n},r=this._events[e];return r?r.push(i):(this._events[e]=[i],this._onAddEvent(e)),this},once:function(e,t,n){function i(){r.off(e,i,n),t.apply(n,arguments)}var r=this;return i._callback=t,this.on(e,i,n),this},off:function(e,t,n){if(!this._events)return this;var i=this._events[e];if(!i)return this;for(var r=i.length,o=0;r>o;o++){var s=i[o],a=s.callback;if((a===t||a._callback===t)&&s.context===n){1===r?(delete this._events[e],this._onRemoveEvent(e)):i.splice(o,1);break}}return this},offAll:function(e){if(this._events)if(e)this._events[e]&&(delete this._events[e],this._onRemoveEvent(e));else{for(e in this._events)this._events.hasOwnProperty(e)&&this._onRemoveEvent(e);delete this._events}return this},emit:function(e){if(!this._events)return this;var t=this._events[e];if(!t)return this;var i,r=t.slice(0),o=r.length,s=-1;switch(arguments.length){case 1:for(;++s<o;)i=r[s],i.callback.call(i.context);break;case 2:for(;++s<o;)i=r[s],i.callback.call(i.context,arguments[1]);break;case 3:for(;++s<o;)i=r[s],i.callback.call(i.context,arguments[1],arguments[2]);break;default:for(var a=n.call(arguments,1);++s<o;)i=r[s],i.callback.apply(i.context,a)}return this},_onAddEvent:function(){},_onRemoveEvent:function(){}});e(i)}),modules.define("event-manager",["inherit","event-emitter","jquery"],function(e,t,n,i){var r=t({__constructor:function(e){this._owner=e,this._listeners=[]},bindTo:function(e,t,r){if(e instanceof n)this._listeners.push({type:"islets",emitter:e.on(t,r,this._owner),event:t,callback:r});else{if(!(e instanceof i))throw new Error("Unsupported emitter type");var o=r.bind(this._owner);this._listeners.push({type:"jquery",emitter:e.on(t,o),event:t,callback:r,proxy:o})}return this},unbindFrom:function(e,t,n){for(var i=0;i<this._listeners.length;i++){var r=this._listeners[i];if(r.emitter===e&&r.event===t&&r.callback===n){this._unbind(r),this._listeners.splice(i,1);break}}return this},unbindAll:function(){for(;this._listeners.length;){var e=this._listeners.pop();this._unbind(e)}return this},_unbind:function(e){switch(e.type){case"islets":e.emitter.off(e.event,e.callback,this._owner);break;case"jquery":e.emitter.off(e.event,e.proxy)}}});e(r)}),modules.define("jquery",["load-script","jquery__config"],function(e,t,n){"undefined"!=typeof jQuery?e(jQuery):t(n.url,function(){e(jQuery)})}),modules.define("load-script",function(e){function t(e){i[e]=!0;var t=n[e];delete n[e],t.forEach(function(e){e()})}var n={},i={},r=document.getElementsByTagName("head")[0];e(function(e,o){if(i[e])return o(),void 0;if(n[e])return n[e].push(o),void 0;n[e]=[o];var s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.src=("file:"===location.protocol&&0===e.indexOf("//")?"http:":"")+e,null===s.onreadystatechange?s.onreadystatechange=function(){var n=this.readyState;("loaded"===n||"complete"===n)&&(s.onreadystatechange=null,t(e))}:s.onload=s.onerror=function(){s.onload=s.onerror=null,t(e)},r.insertBefore(s,r.lastChild)})}),modules.define("jquery__config",function(e){e({url:"//yandex.st/jquery/1.10.1/jquery.min.js"})}),modules.define("block-event",["inherit"],function(e,t){var n=t({__constructor:function(e,t,n){this.type=e,this._isPropagationStopped=Boolean(t),this._isDefaultPrevented=Boolean(n)},isPropagationStopped:function(){return this._isPropagationStopped},isDefaultPrevented:function(){return this._isDefaultPrevented},stopPropagation:function(){this._isPropagationStopped=!0},preventDefault:function(){this._isDefaultPrevented=!0}});e(n)}),function(e){var t=function(e){this._res=e,this._isFulfilled=!!arguments.length,this._isRejected=!1,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[]};t.prototype={valueOf:function(){return this._res},isFulfilled:function(){return this._isFulfilled},isRejected:function(){return this._isRejected},isResolved:function(){return this._isFulfilled||this._isRejected},fulfill:function(e){this.isResolved()||(this._isFulfilled=!0,this._res=e,this._callCallbacks(this._fulfilledCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=n)},reject:function(e){this.isResolved()||(this._isRejected=!0,this._res=e,this._callCallbacks(this._rejectedCallbacks,e),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=n)},notify:function(e){this.isResolved()||this._callCallbacks(this._progressCallbacks,e)},then:function(e,i,r,o){i&&!s(i)?(o=i,i=n):r&&!s(r)&&(o=r,r=n);var a,l=new t;return this._isRejected||(a={promise:l,fn:s(e)?e:n,ctx:o},this._isFulfilled?this._callCallbacks([a],this._res):this._fulfilledCallbacks.push(a)),this._isFulfilled||(a={promise:l,fn:i,ctx:o},this._isRejected?this._callCallbacks([a],this._res):this._rejectedCallbacks.push(a)),this.isResolved()||this._progressCallbacks.push({promise:l,fn:r,ctx:o}),l},fail:function(e,t){return this.then(n,e,t)},always:function(e,t){var n=this,i=function(){return e.call(this,n)};return this.then(i,i,t)},progress:function(e,t){return this.then(n,n,e,t)},spread:function(e,t,n){return this.then(function(t){return e.apply(this,t)},t,n)},done:function(e,t,n,i){this.then(e,t,n,i).fail(o)},delay:function(e){return this.then(function(n){var i=new t;return setTimeout(function(){i.fulfill(n)},e),i})},timeout:function(e){var n=new t,i=setTimeout(function(){n.reject(Error("timed out"))},e);return n.sync(this),n.always(function(){clearTimeout(i)}),n},sync:function(e){e.then(this.fulfill,this.reject,this.notify,this)},_callCallbacks:function(e,t){var n=e.length;if(n){var o=this.isResolved(),s=this.isFulfilled();r(function(){for(var r,a,l,c=0;n>c;)if(r=e[c++],a=r.promise,l=r.fn){var u,f=r.ctx;try{u=f?l.call(f,t):l(t)}catch(h){a.reject(h);continue}o?i.isPromise(u)?function(e){u.then(function(t){e.fulfill(t)},function(t){e.reject(t)},function(t){e.notify(t)})}(a):a.fulfill(u):a.notify(u)}else o?s?a.fulfill(t):a.reject(t):a.notify(t)})}}};var n,i={promise:function(e){return arguments.length?i.isPromise(e)?e:new t(e):new t},when:function(e,t,n,r,o){return i.promise(e).then(t,n,r,o)},fail:function(e,t,r){return i.when(e,n,t,r)},always:function(e,t,n){return i.promise(e).always(t,n)},progress:function(e,t,n){return i.promise(e).progress(t,n)},spread:function(e,t,n,r){return i.promise(e).spread(t,n,r)},done:function(e,t,n,r,o){i.promise(e).done(t,n,r,o)},isPromise:function(e){return e&&s(e.then)},valueOf:function(e){return i.isPromise(e)?e.valueOf():e},isFulfilled:function(e){return i.isPromise(e)?e.isFulfilled():!0},isRejected:function(e){return i.isPromise(e)?e.isRejected():!1},isResolved:function(e){return i.isPromise(e)?e.isResolved():!0},fulfill:function(e){return i.when(e,n,function(e){return e})},reject:function(e){return i.when(e,function(e){var n=new t;return n.reject(e),n})},resolve:function(e){return i.isPromise(e)?e:i.when(e)},invoke:function(t){try{return i.promise(t.apply(e,a.call(arguments,1)))}catch(n){return i.reject(n)}},forEach:function(e,t,n,r){for(var o=r?r.length:e.length,s=0;o>s;)i.when(e[r?r[s]:s],t,n),++s},all:function(e){var n=new t,r=c(e),o=r?u(e):f(e),s=o.length,a=r?[]:{};if(!s)return n.fulfill(a),n;var l=s,h=function(){if(!--l){for(var t=0;s>t;)a[o[t]]=i.valueOf(e[o[t++]]);n.fulfill(a)}},d=function(e){n.reject(e)};return i.forEach(e,h,d,o),n},allResolved:function(e){var n=new t,r=c(e),o=r?u(e):f(e),s=o.length,a=r?[]:{};if(!s)return n.fulfill(a),n;var l=function(){--s||n.fulfill(e)};return i.forEach(e,l,l,o),n},allPatiently:function(e){return i.allResolved(e).then(function(){var t,n,r,o,s=c(e),a=s?u(e):f(e),l=a.length,h=0;if(!l)return s?[]:{};for(;l>h;)r=a[h++],o=e[r],i.isRejected(o)?(t||(t=s?[]:{}),s?t.push(o.valueOf()):t[r]=o.valueOf()):t||((n||(n=s?[]:{}))[r]=i.valueOf(o));if(t)throw t;return n})},any:function(e){var n=new t,r=e.length;if(!r)return n.reject(Error()),n;var o,s=0,a=function(e){n.fulfill(e)},l=function(e){s||(o=e),++s===r&&n.reject(o)};return i.forEach(e,a,l),n},delay:function(e,t){return i.promise(e).delay(t)},timeout:function(e,t){return i.promise(e).timeout(t)}},r=function(){var t=[],n=function(e){return 1===t.push(e)},i=function(){var e=t,n=0,i=t.length;for(t=[];i>n;)e[n++]()};if("object"==typeof process&&process.nextTick)return function(e){n(e)&&process.nextTick(i)};if(e.setImmediate)return function(t){n(t)&&e.setImmediate(i)};if(e.postMessage){var r=!0;if(e.attachEvent){var o=function(){r=!1};e.attachEvent("onmessage",o),e.postMessage("__checkAsync","*"),e.detachEvent("onmessage",o)}if(r){var s="__promise"+ +new Date,a=function(e){e.data===s&&(e.stopPropagation&&e.stopPropagation(),i())};return e.addEventListener?e.addEventListener("message",a,!0):e.attachEvent("onmessage",a),function(t){n(t)&&e.postMessage(s,"*")}}}var l=e.document;if("onreadystatechange"in l.createElement("script")){var c=function(){var e=l.createElement("script");e.onreadystatechange=function(){e.parentNode.removeChild(e),e=e.onreadystatechange=null,i()},(l.documentElement||l.body).appendChild(e)};return function(e){n(e)&&c()}}return function(e){n(e)&&setTimeout(i,0)}}(),o=function(e){r(function(){throw e})},s=function(e){return"function"==typeof e},a=Array.prototype.slice,l=Object.prototype.toString,c=Array.isArray||function(e){return"[object Array]"===l.call(e)},u=function(e){for(var t=[],n=0,i=e.length;i>n;)t.push(n++);return t},f=Object.keys||function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t},h=!0;"object"==typeof exports&&(module.exports=i,h=!1),"object"==typeof modules&&(modules.define("vow",function(e){e(i)}),h=!1),"function"==typeof define&&(define(function(e,t,n){n.exports=i}),h=!1),h&&(e.Vow=i)}(this),modules.define("extend",function(e){function t(e){return!("[object Object]"!==i.call(e)||e.nodeType||e.window===window)}var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString;e(function r(){var e,i,o=arguments[0];for("boolean"==typeof o?(e=o,o=arguments[1],i=2):(e=!1,i=1);i<arguments.length;i++){var s=arguments[i];if(s)for(var a in s)if(n.call(s,a)){var l=s[a],c=!1;if(e&&l&&(t(l)||(c=Array.isArray(l)))){var u,f=o[a];u=c?f&&Array.isArray(f)?f:[]:f&&t(f)?f:{},o[a]=r(e,u,l)}else o[a]=l}}return o})});